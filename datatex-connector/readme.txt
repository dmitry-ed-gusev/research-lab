DataTex Connector utility, version 0.4.0, 2018 (C) Larga

1. Общее описание утилиты
-------------------------------------------------------------------------------------------------------------
Утилита-коннектор между системами:
    - DataTex DBMS
    - LuxMS  BI
    - BFG

Утилита представляет собой консольное приложение с набором ключей. Конфигурирование утилиты осуществляется с
помощью файла конфигурации по умолчанию [environment.yml] в корневом каталоге утилиты, или с помощью альтернативного
файла конфигурации, который может быть указан с использованием опции [--config <config name>].
Параметры конфигурации утилиты очевидны и прокомментированы в самОм файле конфигурации по умолчанию.


2. Системные требования
-------------------------------------------------------------------------------------------------------------
Для функционирования утилиты необходимы следующие системы/модули:
    - ОС Linux/MacOS (64-bit), для указанных ОС должна существовать реализация JVM 64-bit (Oracle/Open JVM/IBM/...)
    - Oracle JDK 8u161+ (64-bit) или Open JDK 1.8+ (64-bit)
    - возможность доступа по IP адресу к серверу LuxMS BI
    - возможность доступа по IP адресу к серверу DataTex DBMS


3. Запуск утилиты, журнал
-------------------------------------------------------------------------------------------------------------
Для запуска утилиты необходимо выполнить команду:

    java -jar <utility-name>.jar [--help | [other options (see below)]]

Данная команда лежит в основе скрипта запуска утилиты [connector.sh], который расположен в корневом каталоге утилиты.

Утилита ведет журнал работы в .log файле с ротацией по размеру (переключение на следующий файл по достижению текущим
файлом размера в 10Мб). Файл(ы) журнала располагаются в каталоге [logs], который находится в корневом каталоге утилиты.
По умолчанию уровень журналирования установлен в значение INFO, это значение возможно изменить с помощью параметра
командной строки [--log-level <logging level>]. Описание параметра см. в разделе 4 - Описание параметров командной строки.


4. Описание параметров командной строки
-------------------------------------------------------------------------------------------------------------
    --help                         - показать экран информации/помощи для утилиты. Если указана данная опция,
                                     остальные опции будут проигнорированы.
    --listds                       - вывести в консоль список датасетов из системы LuxMS BI. Данная опция может
                                     быть использована в комбинации с другими (кроме --help). Параметры подключения
                                     к серверу LuxMS BI указываются в конфигурационном файле утилиты.
    --listtables                   - вывести в консоль список таблиц в указанной схеме DataTex DBMS. Данная опция может
                                     быть использована в комбинации с другими (кроме --help). Параметры подключения
                                     к серверу DataTex указываются в конфигурационном файле утилиты.
    --env <suffix>                 - суффикс конфигурации окружения в файле environment.yml;
                                     примеры: luxms_env<suffix>, datatex_env<suffix>.
    --config <config>              - альтернативный конфиг файл, если не указан - конфиг по умолчанию будет использован
                                     (environment.yml). Описание конфигурациолнного файла см. ниже.
    --log-level <level name>       - принудительная установка уровня журналирования утилиты. По умолчанию, уровень
                                     журналирования  установлен в значение INFO. Возможные значения: DEBUG/INFO/WARN.
                                     Значения регистронезависимы.
    --createds <name>,<desc>       - создание датасета на сервере LuxMS BI с указанными параметрами. Параметры для создания
                                     датасета:
                                       <name> - наименование датасета для создания. Если название содержит пробелы, то
                                         необходимо заключить его в двойные кавычки.
                                       <desc> - описание создаваемого датасета. Если описание содержит пробелы, то необходимо
                                         заключить его в двойные кавычки.
                                     Значения наименования и описания должны быть разделены запятой в командной строке,
                                     символы пробела вокруг запятой не допускаются! Пример опции:
                                       --createds "My new DS","My Description for new DS"
    --deleteds <dataset ID>        - удаление датасета на сервере LuxMS BI по указанному идентификатору. Идентификатор -
                                     целое положительное число. Узнать идентификаторы всех существующих на сервере LUxMS
                                     датасетов можно с помощью опции [--listds]. При указании не существующего идентификатора
                                     система выдаст ошибку.
    --showdstable <ds id>,<table>  - вывод на экран одной из таблиц указанного датасета с сервера LuxMS BI. Параметры
                                     для создания датасета:
                                         <ds id> - идентификатор датасета, целое положительное число. Если указано значение
                                           другого типа или датасет не существует, система вернет ошибку.
                                         <table> - тип таблицы данных для вывода, возможные типы таблиц:
                                           [metrics|units|locations|periods|period_types|data]. Если указано иное значение
                                           система вернет ошибку. Значения регистронезависимы.
                                         Значения идентификатора и типа таблицы должны быть разделены запятой в командной строке,
                                         символы пробела вокруг запятой не допускаются! Пример опции:
                                           --showdstable 1,metrics
    --importds <ds name>           - загрузка датасета из CSV файлов из каталога [csv_import]. Структура данных в формате CSV для загрузки на
                                      сервер LuxMS указана ниже в разделе "Формат CSV датасета LuxMS BI".
    --loadtobi                     - todo: ???

5. Описание конфигурационного файла утилиты
-------------------------------------------------------------------------------------------------------------
В конфигурационном файле должны быть селдующие разделы:

    =======================================================
    [luxms_env]   <- окуржение для LuxMS
        <описание параметров будет тут>
    [datatex_env] <- окружение для DataTex DBMS
        <описание параметров будет тут>
    [general_env] <- окружение для общих параметров системы
        csv_export_dir: <value> <- каталог для экспорта данных в CSV
        csv_import_dir: <value> <- каталог для импорта данных в CSV
    =======================================================

Состав разделов - см. конфиг файл системы, параметры очевидны.

Если необходимо разделить окружения по логическим типам, к имени раздела в конфиге можно добавить суффикс,
примеры указаны в конфиг файле. Для добавления суффикса служит параметр командной строки [--env <suffix>] - см. выше.


6. Формат CSV датасета LuxMS BI
-------------------------------------------------------------------------------------------------------------
Датасет должен быть расположен в каталоге (все файлы в одном каталоге) внутри каталога [csv_import].
Имя каталога - имя датасета для команды [--importds]. Структура каталога датасета:
[dataset_name]
    units.csv     - единицы измерения для метрик датасета
    metrics.csv   - метрики датасета (Что?)
    locations.csv - места для датасета (Где?)
    periods.csv   - временнЫе периоды для датасета (Когда?)
    data.csv      - непосредственно данные (ТВК - точки визуального контроля)
    datasetid     - идентификатор существующего(!) датасета для загрузки данных
